#include <REGX52.H>
#include "Show_74HC595.H"

//在定义时加入”code“,将Animation数组放在flash中，可释放RAM内存。
//但在程序中无法对Animation进行更改。
//unsigned char code Animation[]={			   HELLO!数组
//				0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//				0x7F,0x10,0x10,0x10,0x7F,0x00,0x1C,0x2A,0x2A,
//				0x2A,0x1A,0x00,0x7E,0x01,0x02,0x00,0x7E,0x01,
//				0x02,0x00,0x1C,0x22,0x22,0x1C,0x00,0x7D,0x00,
//				0x00,0x00,0x00,0x00,0x00,0x00,0x00
//				};

//unsigned char code Animation[]={	  // ZYX
//				0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//				0x46,0x4A,0x52,0x62,0x00,0x60,0x10,
//				0x1E,0x10,0x60,0x00,0x46,0x28,0x10,
//				0x28,0x46,0x00,0x18,0x24,0x42,0x21,
//				0x11,0x21,0x42,0x24,0x18,0x00,0x7D,
//				0x00,0x00,0x00,0x00,0x00,0x00,0x00
//				};
unsigned char code Animation[]={	  // HSS
				0x00,0x00,0x00,0x00,0x00,0x00,0x00,
				0x1C,0x22,0x41,0x41,0x41,0x00,0x43,
				0x24,0x18,0x18,0x24,0x43,0x00,0x3F,
				0x4C,0x4A,0x49,0x39,0x00,0x3C,0x42,
				0x49,0x49,0x0E,0x00,0x3F,0x48,0x48,
				0x48,0x30,0x00,0x7D,0x00,0x7F,0x08,
				0x08,0x7F,0x00,0x1F,0x28,0x48,0x28,
				0x1F,0x00,0x7F,0x08,0x08,0x7F,0x00,
				0x1F,0x28,0x48,0x28,0x1F,0x00,0x7F,
				0x08,0x08,0x7F,0x00,0x1F,0x28,0x48,
				0x28,0x1F,0x00,0x00,0x00,0x00,0x00,
				0x00,0x00
				};

void main()
{
	unsigned int i;
	unsigned int offset=0;
	unsigned int count=0;
	D_Scr_Init();
	while(1)
	{		
		for(i=0;i<7;i++)
		{
			D_Scr_Show(i,Animation[i+offset]);	
		}
		count++;//通过count计数和offset来刷新点阵屏显示
		if(count>20)
		{
			count = 0;
			offset++;
			if(offset>71)//判断数组越界，当i+offset越界时，置零offset
			{
				offset = 0;
			}
		}
	}
}
